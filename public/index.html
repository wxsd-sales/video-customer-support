<!DOCTYPE html>
<html>
  <head>
    <title>Video Support Simple Demo</title>
    <link
      href="https://cdn.jsdelivr.net/gh/WXSD-Sales/embeddable-meetings-widget/docs/webex-widgets.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/WXSD-Sales/embeddable-meetings-widget/docs/bundle.js"></script>
  </head>

  <body>
    <p id="message" style="font-family: Arial, sans-serif"></p>
    <div id="embeddable-meetings-widget"></div>
    <script src="./main.js"></script>
    <script>
      (async () => {
        try {
          const token = await getAccessToken();
          const queryString = window.location.search;
          const urlParams = new URLSearchParams(queryString);
          const sipAddress = urlParams.get("sipAddress");
          let message = urlParams.get("message");
          if (message) {
            message = decodeURIComponent(message);
          }
          else {
            message =
              "Hi there! Welcome to our video support page. Please wait for the host to start the meeting";
          }
          document.getElementById("message").textContent = message;
          webexMeetingsWidget({
            accessToken: token,
            meetingDestination: "vvazquez@wxsd.us",
            theme: "light",
            draggable: true,
            width: "100%",
            height: "100%",
            layout: "Grid",
            inMeetingControls: ["mute-audio", "leave-meeting"],
            interstitialControls: ["join-meeting"],
          });
        }
        catch (error) {
          console.log ('Error getting the access token from the backend: ', error);
        }
      })();
    </script>
  </body>
</html>
